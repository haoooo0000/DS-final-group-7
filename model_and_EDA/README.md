### 專案說明：我們的分析流程與目的

本專案目標為探索台灣六都的房價變動與人口流動、CPI、所得、利率等變數之間的關係。
以下為每段分析視覺化與建模分析之程式碼的功能與說明：

---

#### 📦 資料預處理（Data Wrangling）

* **df_raw / df 整理**：讀入原始 CSV，將欄位轉為標準格式（去除括號、標點、中文標題改簡潔）、轉為數值。
* **新增變數**：人口淨流入 = 遷入人數 - 遷出人數；生成標準化的 `日期` 欄位。
* **處理缺值與異常值**：透過 `remove_outlier()` 自訂函式，篩除極端離群值，保留合理分布的資料。

---

#### 📈 城市別趨勢圖（❶–❹）

每一個城市輸出 4 張圖：

1. **房價(中位) & 人口淨流入**：檢查是否有同向或反向關係，是否人口變動與房價有關。
2. **CPI & 房價(平均)**：觀察物價指數變動是否與房價同步。
3. **貸款利率 & 房價(平均)**：分析利率波動是否影響購屋成本與房價。
4. **未來房價預測（ARIMA）**：用 auto.arima 建立時間序列模型預測未來 5 年趨勢。

---

#### 🌍 全域分析（❺–❿）

5. **人口淨流入 vs 房價**：建立跨城市散佈圖與線性回歸線，檢查是否成正相關。
6. **失業率 vs 房價**：判斷勞動市場情況是否與房價有關。
7. **變化率分析**：以 lag() 計算房價與利率變化率，檢查利率調整對房價的即時影響。
8. **六都平均房價時序**：整合全體城市，觀察整體市場趨勢。
9. **淨流入變化率 vs 房價變化率**：比單點資料更動態，適合研究政策或突發事件影響。
10. **RMSE 評估預測表現（ARIMA）**：針對每城市 ARIMA 模型計算 RMSE，並與 baseline（Naive 隨機漫步）比較，補上預測顯著性檢定（Diebold–Mariano test）。

---

#### 🧠 多元線性迴歸與模型診斷

* **lm_model / lm_full**：解釋房價的線性模型，以 CPI、所得、人口流入、利率等解釋變數。
* **Null model 比較**：與截距-only 的 baseline 模型進行 ANOVA 比較，驗證模型是否顯著有效。
* **交叉驗證（5-fold CV）**：驗證模型是否具有穩定性與泛化能力。
* **殘差分析**：繪製殘差 vs 預測值、Q-Q 常態圖與自相關圖，檢查模型假設。
* **VIF 共線性檢查與熱圖**：確保變數間沒有過強共線性問題。
* **優化模型**：以 log-transform + interaction term 優化解釋力，並與原模型比較 R²、AIC，並以 ANOVA 檢驗是否顯著改進。

---

#### ⚙️ 模型強化：Robust / Panel / GLS

* **Robust SE**：修正異質性誤差影響，讓估計更穩健。
* **城市 + 月固定效果模型**：控制城市間與月份間的不可觀測異質性。
* **GLS (AR1)**：針對時間序列的自相關進行修正。
* **Panel Two-way FE**：針對 panel 結構，檢定是否斜率存在顯著異質。

---

#### 📊 視覺化與異常分析

* **城市排名圖**：依照平均房價進行 bar chart 排名。
* **ARIMA 殘差異常圖**：以 2 倍標準差偵測每城市預測落差最多的月份。
* **殘差最大前 10 筆資料表**：揭示哪幾筆資料落差最大，幫助進一步質化分析。
* **房價上升但人口負成長檢測**：找出『價格逆勢上升』的案例。
* **城市人口斜率對比**：視覺化各城市人口變動對房價影響的斜率差異。

---

📤 所有圖表與表格結果皆已依主題分類輸出，並整理至 `model_and_EDA/其他 EDA 分析/` 與 `model_and_EDA/迴歸分析/` 子目錄中，為 DEMO 的材料來源。  